{"ast":null,"code":"var _this = this;\n\nvar buildQuery = function buildQuery(state) {\n  var searchQuery = '/api/chars/search?';\n  var queryStrArr = [];\n\n  if (state.name) {\n    queryStrArr.push(\"name=\".concat(state.name));\n  }\n\n  if (state.alignment) {\n    queryStrArr.push(\"alignment=\".concat(state.alignment));\n  }\n\n  if (state.team) {\n    queryStrArr.push(\"teams=[\\\"\".concat(state.team, \"\\\"]\"));\n  }\n\n  if (state.ability) {\n    queryStrArr.push(\"ability=\".concat(state.ability));\n  }\n\n  if (state.company) {\n    queryStrArr.push(\"company=\".concat(state.company));\n  }\n\n  for (var i = 0; i < queryStrArr.length; i++) {\n    searchQuery += queryStrArr[i];\n\n    if (i < queryStrArr.length - 1) {\n      searchQuery += '&';\n    }\n  } //console.log(searchQuery);\n\n\n  _this.setState({\n    apiURL: searchQuery\n  }, function () {\n    axios.get(state.apiURL).then(function (response) {\n      _this.setState({\n        searchResults: response.data,\n        searchedOnce: true\n      }, function () {// console.log(this.state.apiURL);\n        // console.log(this.state.searchResults);\n        // console.log(this.state.searchedOnce);\n      });\n    }).catch(function (error) {\n      // handle error\n      console.log(error);\n    }).then(function () {// always executed\n      // console.log('good search');\n    });\n  });\n};\n\nexport default buildQuery;","map":{"version":3,"sources":["/Users/jake/dev/2019/excelsior/excelsior-front/client/src/Search/buildQuery.js"],"names":["buildQuery","state","searchQuery","queryStrArr","name","push","alignment","team","ability","company","i","length","setState","apiURL","axios","get","then","response","searchResults","data","searchedOnce","catch","error","console","log"],"mappings":";;AAAA,IAAMA,UAAU,GAAG,SAAbA,UAAa,CAACC,KAAD,EAAW;AAE1B,MAAIC,WAAW,GAAG,oBAAlB;AACA,MAAIC,WAAW,GAAG,EAAlB;;AAEA,MAAIF,KAAK,CAACG,IAAV,EAAgB;AAChBD,IAAAA,WAAW,CAACE,IAAZ,gBAAyBJ,KAAK,CAACG,IAA/B;AACC;;AAED,MAAIH,KAAK,CAACK,SAAV,EAAqB;AACrBH,IAAAA,WAAW,CAACE,IAAZ,qBAA8BJ,KAAK,CAACK,SAApC;AACC;;AAED,MAAIL,KAAK,CAACM,IAAV,EAAgB;AAChBJ,IAAAA,WAAW,CAACE,IAAZ,oBAA4BJ,KAAK,CAACM,IAAlC;AACC;;AAED,MAAIN,KAAK,CAACO,OAAV,EAAmB;AACnBL,IAAAA,WAAW,CAACE,IAAZ,mBAA4BJ,KAAK,CAACO,OAAlC;AACC;;AAED,MAAIP,KAAK,CAACQ,OAAV,EAAmB;AACfN,IAAAA,WAAW,CAACE,IAAZ,mBAA4BJ,KAAK,CAACQ,OAAlC;AACH;;AAED,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,WAAW,CAACQ,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;AACzCR,IAAAA,WAAW,IAAIC,WAAW,CAACO,CAAD,CAA1B;;AACA,QAAKA,CAAC,GAAGP,WAAW,CAACQ,MAAZ,GAAoB,CAA7B,EAAgC;AAC5BT,MAAAA,WAAW,IAAI,GAAf;AACH;AACJ,GA9ByB,CA+B1B;;;AAEA,EAAA,KAAI,CAACU,QAAL,CAAc;AAACC,IAAAA,MAAM,EAAEX;AAAT,GAAd,EAAoC,YAAM;AACtCY,IAAAA,KAAK,CAACC,GAAN,CAAUd,KAAK,CAACY,MAAhB,EAAwBG,IAAxB,CAA6B,UAACC,QAAD,EAAc;AACvC,MAAA,KAAI,CAACL,QAAL,CAAc;AAACM,QAAAA,aAAa,EAAED,QAAQ,CAACE,IAAzB;AAA+BC,QAAAA,YAAY,EAAE;AAA7C,OAAd,EAAkE,YAAM,CACpE;AACA;AACA;AACH,OAJD;AAKH,KAND,EAOCC,KAPD,CAOO,UAACC,KAAD,EAAW;AACd;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,KAVD,EAWCN,IAXD,CAWM,YAAO,CACT;AACA;AACH,KAdD;AAeH,GAhBD;AAiBH,CAlDD;;AAoDA,eAAehB,UAAf","sourcesContent":["const buildQuery = (state) => {\n\n    let searchQuery = '/api/chars/search?';\n    let queryStrArr = [];\n\n    if (state.name) {\n    queryStrArr.push(`name=${state.name}`);\n    }\n\n    if (state.alignment) {\n    queryStrArr.push(`alignment=${state.alignment}`);\n    }\n\n    if (state.team) {\n    queryStrArr.push(`teams=[\"${state.team}\"]`);\n    }\n\n    if (state.ability) {\n    queryStrArr.push(`ability=${state.ability}`);\n    }\n\n    if (state.company) {\n        queryStrArr.push(`company=${state.company}`);\n    }\n\n    for (let i = 0; i < queryStrArr.length; i++) {\n        searchQuery += queryStrArr[i];\n        if  (i < queryStrArr.length -1) {\n            searchQuery += '&';\n        }\n    }\n    //console.log(searchQuery);\n    \n    this.setState({apiURL: searchQuery},() => {       \n        axios.get(state.apiURL).then((response) => {\n            this.setState({searchResults: response.data, searchedOnce: true}, () => {\n                // console.log(this.state.apiURL);\n                // console.log(this.state.searchResults);\n                // console.log(this.state.searchedOnce);\n            });\n        })\n        .catch((error) => {\n            // handle error\n            console.log(error);\n        })\n        .then(() =>  {\n            // always executed\n            // console.log('good search');\n        });\n    });\n}\n\nexport default buildQuery;"]},"metadata":{},"sourceType":"module"}