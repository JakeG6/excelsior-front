{"ast":null,"code":"var _this = this;\n\nvar buildQuery = function buildQuery() {\n  var searchQuery = '/api/chars/search?';\n  var queryStrArr = [];\n\n  if (_this.state.name) {\n    queryStrArr.push(\"name=\".concat(_this.state.name));\n  }\n\n  if (_this.state.alignment) {\n    queryStrArr.push(\"alignment=\".concat(_this.state.alignment));\n  }\n\n  if (_this.state.team) {\n    queryStrArr.push(\"teams=[\\\"\".concat(_this.state.team, \"\\\"]\"));\n  }\n\n  if (_this.state.ability) {\n    queryStrArr.push(\"ability=\".concat(_this.state.ability));\n  }\n\n  if (_this.state.company) {\n    queryStrArr.push(\"company=\".concat(_this.state.company));\n  }\n\n  for (var i = 0; i < queryStrArr.length; i++) {\n    searchQuery += queryStrArr[i];\n\n    if (i < queryStrArr.length - 1) {\n      searchQuery += '&';\n    }\n  } //console.log(searchQuery);\n\n\n  _this.setState({\n    apiURL: searchQuery\n  }, function () {\n    axios.get(_this.state.apiURL).then(function (response) {\n      _this.setState({\n        searchResults: response.data,\n        searchedOnce: true\n      }, function () {// console.log(this.state.apiURL);\n        // console.log(this.state.searchResults);\n        // console.log(this.state.searchedOnce);\n      });\n    }).catch(function (error) {\n      // handle error\n      console.log(error);\n    }).then(function () {// always executed\n      // console.log('good search');\n    });\n  });\n};","map":{"version":3,"sources":["/Users/jake/dev/2019/excelsior/excelsior-front/client/src/Search/buildQuery.js"],"names":["buildQuery","searchQuery","queryStrArr","state","name","push","alignment","team","ability","company","i","length","setState","apiURL","axios","get","then","response","searchResults","data","searchedOnce","catch","error","console","log"],"mappings":";;AAAA,IAAMA,UAAU,GAAG,SAAbA,UAAa,GAAM;AAErB,MAAIC,WAAW,GAAG,oBAAlB;AACA,MAAIC,WAAW,GAAG,EAAlB;;AAEA,MAAI,KAAI,CAACC,KAAL,CAAWC,IAAf,EAAqB;AACrBF,IAAAA,WAAW,CAACG,IAAZ,gBAAyB,KAAI,CAACF,KAAL,CAAWC,IAApC;AACC;;AAED,MAAI,KAAI,CAACD,KAAL,CAAWG,SAAf,EAA0B;AAC1BJ,IAAAA,WAAW,CAACG,IAAZ,qBAA8B,KAAI,CAACF,KAAL,CAAWG,SAAzC;AACC;;AAED,MAAI,KAAI,CAACH,KAAL,CAAWI,IAAf,EAAqB;AACrBL,IAAAA,WAAW,CAACG,IAAZ,oBAA4B,KAAI,CAACF,KAAL,CAAWI,IAAvC;AACC;;AAED,MAAI,KAAI,CAACJ,KAAL,CAAWK,OAAf,EAAwB;AACxBN,IAAAA,WAAW,CAACG,IAAZ,mBAA4B,KAAI,CAACF,KAAL,CAAWK,OAAvC;AACC;;AAED,MAAI,KAAI,CAACL,KAAL,CAAWM,OAAf,EAAwB;AACpBP,IAAAA,WAAW,CAACG,IAAZ,mBAA4B,KAAI,CAACF,KAAL,CAAWM,OAAvC;AACH;;AAED,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,WAAW,CAACS,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;AACzCT,IAAAA,WAAW,IAAIC,WAAW,CAACQ,CAAD,CAA1B;;AACA,QAAKA,CAAC,GAAGR,WAAW,CAACS,MAAZ,GAAoB,CAA7B,EAAgC;AAC5BV,MAAAA,WAAW,IAAI,GAAf;AACH;AACJ,GA9BoB,CA+BrB;;;AAEA,EAAA,KAAI,CAACW,QAAL,CAAc;AAACC,IAAAA,MAAM,EAAEZ;AAAT,GAAd,EAAoC,YAAM;AACtCa,IAAAA,KAAK,CAACC,GAAN,CAAU,KAAI,CAACZ,KAAL,CAAWU,MAArB,EAA6BG,IAA7B,CAAkC,UAACC,QAAD,EAAc;AAC5C,MAAA,KAAI,CAACL,QAAL,CAAc;AAACM,QAAAA,aAAa,EAAED,QAAQ,CAACE,IAAzB;AAA+BC,QAAAA,YAAY,EAAE;AAA7C,OAAd,EAAkE,YAAM,CACpE;AACA;AACA;AACH,OAJD;AAKH,KAND,EAOCC,KAPD,CAOO,UAACC,KAAD,EAAW;AACd;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,KAVD,EAWCN,IAXD,CAWM,YAAO,CACT;AACA;AACH,KAdD;AAeH,GAhBD;AAiBH,CAlDD","sourcesContent":["const buildQuery = () => {\n\n    let searchQuery = '/api/chars/search?';\n    let queryStrArr = [];\n\n    if (this.state.name) {\n    queryStrArr.push(`name=${this.state.name}`);\n    }\n\n    if (this.state.alignment) {\n    queryStrArr.push(`alignment=${this.state.alignment}`);\n    }\n\n    if (this.state.team) {\n    queryStrArr.push(`teams=[\"${this.state.team}\"]`);\n    }\n\n    if (this.state.ability) {\n    queryStrArr.push(`ability=${this.state.ability}`);\n    }\n\n    if (this.state.company) {\n        queryStrArr.push(`company=${this.state.company}`);\n    }\n\n    for (let i = 0; i < queryStrArr.length; i++) {\n        searchQuery += queryStrArr[i];\n        if  (i < queryStrArr.length -1) {\n            searchQuery += '&';\n        }\n    }\n    //console.log(searchQuery);\n    \n    this.setState({apiURL: searchQuery},() => {       \n        axios.get(this.state.apiURL).then((response) => {\n            this.setState({searchResults: response.data, searchedOnce: true}, () => {\n                // console.log(this.state.apiURL);\n                // console.log(this.state.searchResults);\n                // console.log(this.state.searchedOnce);\n            });\n        })\n        .catch((error) => {\n            // handle error\n            console.log(error);\n        })\n        .then(() =>  {\n            // always executed\n            // console.log('good search');\n        });\n    });\n}"]},"metadata":{},"sourceType":"module"}