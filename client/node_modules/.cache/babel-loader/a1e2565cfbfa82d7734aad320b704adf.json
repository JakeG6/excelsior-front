{"ast":null,"code":"import _classCallCheck from \"/Users/jake/dev/excelsior/excelsior-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jake/dev/excelsior/excelsior-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jake/dev/excelsior/excelsior-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jake/dev/excelsior/excelsior-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jake/dev/excelsior/excelsior-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/jake/dev/excelsior/excelsior-front/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/jake/dev/excelsior/excelsior-front/src/Search.js\";\nimport React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport Popup from 'reactjs-popup';\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport ResultsPage from \"./ResultsPage/ResultsPage.js\";\nimport axios from 'axios';\nimport \"./Search.css\";\n\nvar Search =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Search, _Component);\n\n  function Search(props) {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Search).call(this, props));\n    _this.state = {\n      apiURL: '',\n      name: '',\n      civName: '',\n      alignment: '',\n      team: '',\n      ability: '',\n      company: '',\n      //check this \n      searchResults: [],\n      searchedOnce: false,\n      username: '',\n      password: ''\n    };\n    _this.handleSearchSubmit = _this.handleSearchSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.buildQuery = _this.buildQuery.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleLoginSubmit = _this.handleLoginSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"buildQuery\",\n    value: function buildQuery() {\n      var _this2 = this;\n\n      var searchQuery = 'http://localhost:8080/chars/search?';\n      var queryStrArr = [];\n\n      if (this.state.name) {\n        queryStrArr.push(\"name=\".concat(this.state.name));\n      }\n\n      if (this.state.alignment) {\n        queryStrArr.push(\"alignment=\".concat(this.state.alignment));\n      }\n\n      if (this.state.team) {\n        queryStrArr.push(\"teams=[\\\"\".concat(this.state.team, \"\\\"]\"));\n      }\n\n      if (this.state.ability) {\n        queryStrArr.push(\"ability=\".concat(this.state.ability));\n      }\n\n      if (this.state.company) {\n        queryStrArr.push(\"company=\".concat(this.state.company));\n      }\n\n      for (var i = 0; i < queryStrArr.length; i++) {\n        searchQuery += queryStrArr[i];\n\n        if (i < queryStrArr.length - 1) {\n          searchQuery += '&';\n        }\n      } //console.log(`the search query is ${searchQuery}!`);\n      //console.log(this.state.searchedOnce)\n\n\n      this.setState({\n        apiURL: searchQuery\n      }, function () {\n        axios.get(_this2.state.apiURL).then(function (response) {\n          // handle success\n          //console.log(response);\n          _this2.setState({\n            searchResults: response.data,\n            searchedOnce: true\n          }, function () {// console.log(this.state.searchResults);\n            //console.log(this.state.searchedOnce)\n          });\n        }).catch(function (error) {// handle error\n          //console.log(error);\n        }).then(function () {// always executed\n          // console.log('good search');\n        });\n      });\n    } //handle the submit using this.\n\n  }, {\n    key: \"handleSearchSubmit\",\n    value: function handleSearchSubmit(event) {\n      console.log(\"the response objects: \".concat(this.state.searchResults));\n      event.preventDefault();\n      this.buildQuery();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"searchbar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, this.props.isAuthed ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        className: \"link-bar\",\n        container: true,\n        spacing: 24,\n        justify: \"flex-end\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xl: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/upload\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"CREATE A CHARACTER\"))), React.createElement(Grid, {\n        item: true,\n        xl: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: this.props.handleLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"LOG OUT\")))) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        className: \"link-bar\",\n        container: true,\n        spacing: 24,\n        justify: \"flex-end\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        sm: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(Popup, {\n        trigger: React.createElement(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, \"LOG IN\"),\n        modal: true,\n        closeOnDocumentClick: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, function (close) {\n        return React.createElement(\"div\", {\n          className: \"modal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          className: \"close\",\n          onClick: function onClick() {\n            close();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, \"\\xD7\"), React.createElement(\"form\", {\n          onSubmit: function onSubmit() {\n            _this3.props.handleLogin(_this3.state.username, _this3.state.password);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, \"Username\", React.createElement(\"input\", {\n          type: \"text\",\n          value: _this3.state.username,\n          onChange: function onChange(event) {\n            return _this3.setState({\n              username: event.target.value\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        })), React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, \"Password\", React.createElement(\"input\", {\n          type: \"text\",\n          value: _this3.state.password,\n          onChange: function onChange(event) {\n            return _this3.setState({\n              password: event.target.value\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        })), React.createElement(\"input\", {\n          type: \"submit\",\n          value: \"LOG IN\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        })));\n      })))), React.createElement(\"div\", {\n        className: \"logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"EXCELSIOR\"), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"The Superhero Database\")), React.createElement(\"form\", {\n        className: \"search-form\",\n        onSubmit: this.handleSearchSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        spacing: 8,\n        alignItems: \"center\",\n        justify: \"center\",\n        direction: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        lg: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"Name\"), React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.name,\n        onChange: function onChange(event) {\n          return _this3.setState({\n            name: event.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        lg: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \"Alignment\"), React.createElement(\"select\", {\n        onChange: function onChange(event) {\n          return _this3.setState({\n            alignment: event.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"-\"), React.createElement(\"option\", {\n        value: \"Hero\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"Hero\"), React.createElement(\"option\", {\n        value: \"Villain\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"Villain\"), React.createElement(\"option\", {\n        value: \"Antihero\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"Antihero\"))), React.createElement(Grid, {\n        item: true,\n        lg: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, \"Team\"), React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.team,\n        onChange: function onChange(event) {\n          return _this3.setState({\n            team: event.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        lg: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, \"Company\"), React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.company,\n        onChange: function onChange(event) {\n          return _this3.setState({\n            company: event.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        xl: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"SUBMIT\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }))))), React.createElement(\"div\", {\n        className: \"circuit-background\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(ResultsPage, {\n        searchResults: this.state.searchResults,\n        searchedOnce: this.state.searchedOnce,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Search;\n}(Component);\n\nexport default Search;","map":{"version":3,"sources":["/Users/jake/dev/excelsior/excelsior-front/src/Search.js"],"names":["React","Component","Button","Grid","Popup","BrowserRouter","Router","Route","Link","ResultsPage","axios","Search","props","state","apiURL","name","civName","alignment","team","ability","company","searchResults","searchedOnce","username","password","handleSearchSubmit","bind","buildQuery","handleLoginSubmit","searchQuery","queryStrArr","push","i","length","setState","get","then","response","data","catch","error","event","console","log","preventDefault","isAuthed","handleLogout","close","handleLogin","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\n\nimport Popup from 'reactjs-popup';\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport ResultsPage from \"./ResultsPage/ResultsPage.js\";\nimport axios from 'axios';\nimport \"./Search.css\";\n\nclass Search extends Component {\n\n    constructor(props) {\n\n        super(props);\n        this.state = {\n        apiURL: '',\n        name: '',\n        civName: '',\n        alignment: '',\n        team: '',\n        ability: '',\n        company: '',\n        //check this \n        searchResults: [],\n        searchedOnce: false,\n\n        username: '',\n        password: '',\n        \n        }\n\n        this.handleSearchSubmit = this.handleSearchSubmit.bind(this);\n        this.buildQuery = this.buildQuery.bind(this);\n\n        this.handleLoginSubmit = this.handleLoginSubmit.bind(this)\n\n    }\n  \n    buildQuery() {\n\n        let searchQuery = 'http://localhost:8080/chars/search?';\n        let queryStrArr = [];\n\n        if (this.state.name) {\n        queryStrArr.push(`name=${this.state.name}`);\n        }\n\n        if (this.state.alignment) {\n        queryStrArr.push(`alignment=${this.state.alignment}`);\n        }\n\n        if (this.state.team) {\n        queryStrArr.push(`teams=[\"${this.state.team}\"]`);\n        }\n\n        if (this.state.ability) {\n        queryStrArr.push(`ability=${this.state.ability}`);\n        }\n\n        if (this.state.company) {\n            queryStrArr.push(`company=${this.state.company}`);\n        }\n\n        for (let i = 0; i < queryStrArr.length; i++) {\n            searchQuery += queryStrArr[i];\n            if  (i < queryStrArr.length -1) {\n                searchQuery += '&';\n            }\n        }\n\n        //console.log(`the search query is ${searchQuery}!`);\n        //console.log(this.state.searchedOnce)\n        \n        this.setState({apiURL: searchQuery},() => {\n        \n            axios.get(this.state.apiURL).then((response) => {\n                // handle success\n                //console.log(response);\n                this.setState({searchResults: response.data, searchedOnce: true}, () => {\n                    // console.log(this.state.searchResults);\n\n                        //console.log(this.state.searchedOnce)\n                });\n            } )\n            .catch( (error) => {\n                // handle error\n                //console.log(error);\n            })\n            .then( () =>  {\n                // always executed\n                // console.log('good search');\n            });\n        });\n    }\n  \n  //handle the submit using this.\n    handleSearchSubmit(event) {\n        console.log(`the response objects: ${this.state.searchResults}`);\n        event.preventDefault();\n        this.buildQuery();    \n    }\n  \n    render() {\n        return (\n            <div className=\"App\">\n                <div className=\"searchbar\">\n                    {\n                    this.props.isAuthed ? \n                        <div>\n                            <Grid className=\"link-bar\" container spacing={24} justify=\"flex-end\">\n                                <Grid item xl={1}>\n                                    <Button variant=\"contained\" color=\"primary\"><Link to=\"/upload\">CREATE A CHARACTER</Link></Button>\n                                </Grid>\n                                <Grid item xl={1}>\n                                    <Button variant=\"contained\" color=\"primary\" onClick={this.props.handleLogout}>LOG OUT</Button>\n                                </Grid>\n                            </Grid>\n                        </div>\n                        : \n                        <div>\n                        <Grid className=\"link-bar\" container spacing={24} justify=\"flex-end\">\n                            <Grid item sm={1}>\n                                <Popup trigger={<Button variant=\"contained\" color=\"primary\">LOG IN</Button>} modal closeOnDocumentClick >\n                                {close => (\n                                    <div className=\"modal\">\n                                        <a className=\"close\" onClick={() => {close()}}>\n                                            &times;\n                                        </a>\n                                        <form onSubmit={() => {this.props.handleLogin(this.state.username, this.state.password)}}  >\n                                            {/* <p>{this.props.attemptMessage}</p> */}\n                                            <label>\n                                                Username\n                                                <input type=\"text\" value={this.state.username} onChange={ event => this.setState({ username: event.target.value })} />\n                                            </label>\n                                            <label>\n                                                Password\n                                                <input type=\"text\" value={this.state.password} onChange={ event => this.setState({ password: event.target.value })} />\n                                            </label>\n                                            <input type=\"submit\" value=\"LOG IN\" />\n                                        </form>\n                                    </div>\n                                )}\n                                </Popup>\n                            </Grid>\n                        </Grid>    \n                    </div>    \n                    }\n                    <div className=\"logo\">\n                        <h1>EXCELSIOR</h1>\n                        <h2>The Superhero Database</h2>\n                    </div>\n                    <form className=\"search-form\" onSubmit={this.handleSearchSubmit}>\n                        <Grid container spacing={8} alignItems=\"center\" justify=\"center\" direction=\"row\"> \n                            <Grid item lg={2}>\n                            <label>Name</label>\n                                <input  type=\"text\" value={this.state.name} onChange={ event => this.setState({ name: event.target.value })} />\n                            </Grid>\n                            <Grid item lg={2}>\n                                <label>Alignment</label>\n                                <select onChange={event => this.setState({ alignment: event.target.value })}>\n                                    <option value=\"\">-</option>\n                                    <option value=\"Hero\">Hero</option>\n                                    <option value=\"Villain\">Villain</option>\n                                    <option value=\"Antihero\">Antihero</option>\n                                </select>\n                            </Grid>\n                            <Grid item lg={2}>\n                                <label>Team</label>\n                                <input type=\"text\" value={this.state.team} onChange={ event => this.setState({ team: event.target.value })} />\n                            </Grid>\n                            <Grid item lg={2}>\n                                <label>Company</label>\n                                <input type=\"text\" value={this.state.company} onChange={ event => this.setState({ company: event.target.value })} />\n                            </Grid>\n                            <Grid item xl={2}>\n                                <input type=\"submit\" value=\"SUBMIT\" />\n                            </Grid>\n                        </Grid>\n                    </form>\n                </div>\n                <div className=\"circuit-background\">   \n                    <ResultsPage searchResults={this.state.searchResults} searchedOnce={this.state.searchedOnce}/>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Search;"]},"metadata":{},"sourceType":"module"}